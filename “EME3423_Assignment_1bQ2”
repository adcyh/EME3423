import cv2

def main():
    # 0 = default webcam; change to 1/2... if you have multiple cameras
    cap = cv2.VideoCapture(0)

    if not cap.isOpened():
        raise RuntimeError("Cannot open webcam. Check device index or permissions.")

    # Optional: set a consistent resolution for all windows (adjust to your needs)
    # cap.set(cv2.CAP_PROP_FRAME_WIDTH,  640)
    # cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 480)

    # Create named windows so you can position them if you want
    cv2.namedWindow("Original",      cv2.WINDOW_NORMAL)
    cv2.namedWindow("Gaussian Blur", cv2.WINDOW_NORMAL)
    cv2.namedWindow("HSV Color",     cv2.WINDOW_NORMAL)
    cv2.namedWindow("Canny Edges",   cv2.WINDOW_NORMAL)

    # Optional: pre-position windows on screen
    # cv2.moveWindow("Original",      0,   0)
    # cv2.moveWindow("Gaussian Blur", 660, 0)
    # cv2.moveWindow("HSV Color",     0,   520)
    # cv2.moveWindow("Canny Edges",   660, 520)

    # Parameters you can tweak for your report
    blur_ksize = (11, 11)   # kernel size for Gaussian blur (must be odd, e.g., 5,7,9,11)
    canny_low  = 100        # lower threshold for Canny
    canny_high = 200        # upper threshold for Canny

    while True:
        ok, frame = cap.read()
        if not ok:
            print("Frame grab failed. Exiting...")
            break

        # --- Original ---
        original = frame

        # --- Gaussian Blur ---
        # Convert to RGB-like smoothness; larger kernel => stronger blur
        blurred = cv2.GaussianBlur(original, blur_ksize, sigmaX=0, sigmaY=0)

        # --- HSV Color ---
        # Useful for color-based processing; just for display here
        hsv = cv2.cvtColor(original, cv2.COLOR_BGR2HSV)

        # --- Canny Edges ---
        # Better edges if we reduce noise first (use blurred grayscale)
        gray_blur = cv2.cvtColor(blurred, cv2.COLOR_BGR2GRAY)
        edges = cv2.Canny(gray_blur, threshold1=canny_low, threshold2=canny_high)

        # Show the four windows
        cv2.imshow("Original",      original)
        cv2.imshow("Gaussian Blur", blurred)
        cv2.imshow("HSV Color",     hsv)
        cv2.imshow("Canny Edges",   edges)

        # Press 'q' to quit
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

    cap.release()
    cv2.destroyAllWindows()

if __name__ == "__main__":
    main()
